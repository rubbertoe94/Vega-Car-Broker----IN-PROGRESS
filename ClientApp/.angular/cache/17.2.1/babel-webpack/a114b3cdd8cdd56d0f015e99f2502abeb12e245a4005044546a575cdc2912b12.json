{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet VehicleFormComponent = class VehicleFormComponent {\n  constructor(vehicleService, toastr) {\n    this.vehicleService = vehicleService;\n    this.toastr = toastr;\n    this.vehicle = {\n      features: []\n    };\n  }\n  ngOnInit() {\n    this.vehicleService.getMakes().subscribe(result => {\n      this.makes = result;\n    });\n    this.vehicleService.getFeatures().subscribe(result => {\n      this.features = result;\n    });\n  }\n  onMakeChange() {\n    var selectedMake = this.makes.find(m => m.id == this.vehicle.makeId);\n    this.models = selectedMake ? selectedMake.models : [];\n    delete this.vehicle.modelId;\n  }\n  onFeatureToggle(featureId, $event) {\n    //tells angular that 'checked' is a property of target\n    const target = $event.target;\n    if (target && target.checked) {\n      this.vehicle.features.push(featureId);\n    } else {\n      var index = this.vehicle.features.indexOf(featureId);\n      this.vehicle.features.splice(index, 1);\n    }\n  }\n  submit() {\n    console.log(this.vehicle);\n    this.vehicleService.create(this.vehicle).subscribe(response => console.log(response), err => this.toastr.error('An unexpected error happened', 'Error', {\n      timeOut: 5000,\n      closeButton: true,\n      positionClass: 'toast-bottom-right'\n    }));\n  }\n};\nVehicleFormComponent = __decorate([Component({\n  selector: 'app-vehicle-form',\n  templateUrl: './vehicle-form.component.html',\n  styleUrls: ['./vehicle-form.component.css']\n})], VehicleFormComponent);\nexport { VehicleFormComponent };","map":{"version":3,"names":["Component","VehicleFormComponent","constructor","vehicleService","toastr","vehicle","features","ngOnInit","getMakes","subscribe","result","makes","getFeatures","onMakeChange","selectedMake","find","m","id","makeId","models","modelId","onFeatureToggle","featureId","$event","target","checked","push","index","indexOf","splice","submit","console","log","create","response","err","error","timeOut","closeButton","positionClass","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\robfu\\vega\\clientapp\\src\\app\\components\\vehicle-form\\vehicle-form.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { VehicleService } from 'src/app/services/vehicle.service';\r\nimport { MakeViewModel } from 'src/app/models/MakeViewModel';\r\nimport { ToastrService } from 'ngx-toastr';\r\n\r\n@Component({\r\n  selector: 'app-vehicle-form',\r\n  templateUrl: './vehicle-form.component.html',\r\n  styleUrls: ['./vehicle-form.component.css']\r\n})\r\nexport class VehicleFormComponent {\r\nmakes!: any[];\r\nmodels!: any[];\r\nfeatures!: any[];\r\nvehicle: any = {\r\n  features: []\r\n  \r\n};\r\n\r\nconstructor(\r\n  private vehicleService: VehicleService,\r\n  private toastr: ToastrService\r\n  ) {}\r\n\r\nngOnInit() {\r\n  this.vehicleService.getMakes().subscribe(result => {\r\n    this.makes = result;\r\n  })\r\n\r\n  this.vehicleService.getFeatures().subscribe(result => {\r\n    this.features = result;\r\n  })\r\n}\r\n\r\nonMakeChange() {\r\nvar selectedMake = this.makes.find(m => m.id == this.vehicle.makeId);\r\nthis.models = selectedMake ? selectedMake.models : [];\r\ndelete this.vehicle.modelId;\r\n}\r\n\r\nonFeatureToggle(featureId: number, $event: Event) {\r\n  //tells angular that 'checked' is a property of target\r\n  const target = $event.target as HTMLInputElement | null;\r\n  \r\n  if (target && target.checked) {\r\n    this.vehicle.features.push(featureId);\r\n  } else {\r\n    var index = this.vehicle.features.indexOf(featureId);\r\n    this.vehicle.features.splice(index, 1);\r\n  }\r\n}\r\n\r\nsubmit() {\r\n  console.log(this.vehicle);\r\n  this.vehicleService.create(this.vehicle)\r\n    .subscribe(\r\n      response => console.log(response),\r\n      err => this.toastr.error('An unexpected error happened', 'Error', {\r\n        timeOut: 5000,\r\n        closeButton: true,\r\n        positionClass: 'toast-bottom-right',\r\n      })\r\n    );\r\n}\r\n\r\n\r\n\r\n}\r\n\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAUlC,IAAMC,oBAAoB,GAA1B,MAAMA,oBAAoB;EASjCC,YACUC,cAA8B,EAC9BC,MAAqB;IADrB,KAAAD,cAAc,GAAdA,cAAc;IACd,KAAAC,MAAM,GAANA,MAAM;IAPhB,KAAAC,OAAO,GAAQ;MACbC,QAAQ,EAAE;KAEX;EAKI;EAELC,QAAQA,CAAA;IACN,IAAI,CAACJ,cAAc,CAACK,QAAQ,EAAE,CAACC,SAAS,CAACC,MAAM,IAAG;MAChD,IAAI,CAACC,KAAK,GAAGD,MAAM;IACrB,CAAC,CAAC;IAEF,IAAI,CAACP,cAAc,CAACS,WAAW,EAAE,CAACH,SAAS,CAACC,MAAM,IAAG;MACnD,IAAI,CAACJ,QAAQ,GAAGI,MAAM;IACxB,CAAC,CAAC;EACJ;EAEAG,YAAYA,CAAA;IACZ,IAAIC,YAAY,GAAG,IAAI,CAACH,KAAK,CAACI,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,IAAI,IAAI,CAACZ,OAAO,CAACa,MAAM,CAAC;IACpE,IAAI,CAACC,MAAM,GAAGL,YAAY,GAAGA,YAAY,CAACK,MAAM,GAAG,EAAE;IACrD,OAAO,IAAI,CAACd,OAAO,CAACe,OAAO;EAC3B;EAEAC,eAAeA,CAACC,SAAiB,EAAEC,MAAa;IAC9C;IACA,MAAMC,MAAM,GAAGD,MAAM,CAACC,MAAiC;IAEvD,IAAIA,MAAM,IAAIA,MAAM,CAACC,OAAO,EAAE;MAC5B,IAAI,CAACpB,OAAO,CAACC,QAAQ,CAACoB,IAAI,CAACJ,SAAS,CAAC;IACvC,CAAC,MAAM;MACL,IAAIK,KAAK,GAAG,IAAI,CAACtB,OAAO,CAACC,QAAQ,CAACsB,OAAO,CAACN,SAAS,CAAC;MACpD,IAAI,CAACjB,OAAO,CAACC,QAAQ,CAACuB,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;IACxC;EACF;EAEAG,MAAMA,CAAA;IACJC,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC3B,OAAO,CAAC;IACzB,IAAI,CAACF,cAAc,CAAC8B,MAAM,CAAC,IAAI,CAAC5B,OAAO,CAAC,CACrCI,SAAS,CACRyB,QAAQ,IAAIH,OAAO,CAACC,GAAG,CAACE,QAAQ,CAAC,EACjCC,GAAG,IAAI,IAAI,CAAC/B,MAAM,CAACgC,KAAK,CAAC,8BAA8B,EAAE,OAAO,EAAE;MAChEC,OAAO,EAAE,IAAI;MACbC,WAAW,EAAE,IAAI;MACjBC,aAAa,EAAE;KAChB,CAAC,CACH;EACL;CAIC;AAzDYtC,oBAAoB,GAAAuC,UAAA,EALhCxC,SAAS,CAAC;EACTyC,QAAQ,EAAE,kBAAkB;EAC5BC,WAAW,EAAE,+BAA+B;EAC5CC,SAAS,EAAE,CAAC,8BAA8B;CAC3C,CAAC,C,EACW1C,oBAAoB,CAyDhC"},"metadata":{},"sourceType":"module","externalDependencies":[]}